<!DOCTYPE html>
<script src="https:/d3js.org/d3.v3.min.js"></script>
<head>
  <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="heading">
        <h>Covid-19 and Google Searches</h>
        <p>Tracking spikes in Google searches for <b>"covid symptoms"</b> and spikes in Covid-19 cases by state.</p>
    </div>

    <div id='container' class='maps'>Maps!</div>

    <div class='slider'>
        <input id='timeslide' type='range' min='0' max='168' value='0' step='1'/>
        <span id='range'>0</span>
    </div>

    <script>
        var inputValue = null;
        var date = [
            '2020-02-01',
            '2020-02-02',
            '2020-02-03',
            '2020-02-04',
            '2020-02-05',
            '2020-02-06',
            '2020-02-07',
            '2020-02-08',
            '2020-02-09',
            '2020-02-10',
            '2020-02-11',
            '2020-02-12',
            '2020-02-13',
            '2020-02-14',
            '2020-02-15',
            '2020-02-16',
            '2020-02-17',
            '2020-02-18',
            '2020-02-19',
            '2020-02-20',
            '2020-02-21',
            '2020-02-22',
            '2020-02-23',
            '2020-02-24',
            '2020-02-25',
            '2020-02-26',
            '2020-02-27',
            '2020-02-28',
            '2020-02-29',
            '2020-03-01',
            '2020-03-02',
            '2020-03-03',
            '2020-03-04',
            '2020-03-05',
            '2020-03-06',
            '2020-03-07',
            '2020-03-08',
            '2020-03-09',
            '2020-03-10',
            '2020-03-11',
            '2020-03-12',
            '2020-03-13',
            '2020-03-14',
            '2020-03-15',
            '2020-03-16',
            '2020-03-17',
            '2020-03-18',
            '2020-03-19',
            '2020-03-20',
            '2020-03-21',
            '2020-03-22',
            '2020-03-23',
            '2020-03-24',
            '2020-03-25',
            '2020-03-26',
            '2020-03-27',
            '2020-03-28',
            '2020-03-29',
            '2020-03-30',
            '2020-03-31',
            '2020-04-01',
            '2020-04-02',
            '2020-04-03',
            '2020-04-04',
            '2020-04-05',
            '2020-04-06',
            '2020-04-07',
            '2020-04-08',
            '2020-04-09',
            '2020-04-10',
            '2020-04-11',
            '2020-04-12',
            '2020-04-13',
            '2020-04-14',
            '2020-04-15',
            '2020-04-16',
            '2020-04-17',
            '2020-04-18',
            '2020-04-19',
            '2020-04-20',
            '2020-04-21',
            '2020-04-22',
            '2020-04-23',
            '2020-04-24',
            '2020-04-25',
            '2020-04-26',
            '2020-04-27',
            '2020-04-28',
            '2020-04-29',
            '2020-04-30',
            '2020-05-01',
            '2020-05-02',
            '2020-05-03',
            '2020-05-04',
            '2020-05-05',
            '2020-05-06',
            '2020-05-07',
            '2020-05-08',
            '2020-05-09',
            '2020-05-10',
            '2020-05-11',
            '2020-05-12',
            '2020-05-13',
            '2020-05-14',
            '2020-05-15',
            '2020-05-16',
            '2020-05-17',
            '2020-05-18',
            '2020-05-19',
            '2020-05-20',
            '2020-05-21',
            '2020-05-22',
            '2020-05-23',
            '2020-05-24',
            '2020-05-25',
            '2020-05-26',
            '2020-05-27',
            '2020-05-28',
            '2020-05-29',
            '2020-05-30',
            '2020-05-31',
            '2020-06-01',
            '2020-06-02',
            '2020-06-03',
            '2020-06-04',
            '2020-06-05',
            '2020-06-06',
            '2020-06-07',
            '2020-06-08',
            '2020-06-09',
            '2020-06-10',
            '2020-06-11',
            '2020-06-12',
            '2020-06-13',
            '2020-06-14',
            '2020-06-15',
            '2020-06-16',
            '2020-06-17',
            '2020-06-18',
            '2020-06-19',
            '2020-06-20',
            '2020-06-21',
            '2020-06-22',
            '2020-06-23',
            '2020-06-24',
            '2020-06-25',
            '2020-06-26',
            '2020-06-27',
            '2020-06-28',
            '2020-06-29',
            '2020-06-30',
            '2020-07-01',
            '2020-07-02',
            '2020-07-03',
            '2020-07-04',
            '2020-07-05',
            '2020-07-06',
            '2020-07-07',
            '2020-07-08',
            '2020-07-09',
            '2020-07-10',
            '2020-07-11',
            '2020-07-12',
            '2020-07-13',
            '2020-07-14',
            '2020-07-15',
            '2020-07-16',
            '2020-07-17',
            '2020-07-18',
            '2020-07-19'
        ]

            // initialize SVG components, variables
            var container = document.getElementById('container');
            var container_style = window.getComputedStyle(container);
            var width = 1000;
            var height = 500;
                // need SVG canvas to have two maps within it, and a slider bar
            var svg = d3.select('.maps')
                    .append("svg")
                    .attr('preserveAspectRatio', 'xMinYMin meet')
                    .attr('viewBox', '0 0 ' + width + ' ' + height);
            var projection_google = d3.geo.albersUsa()
                    .scale(650)
                    .translate([width / 4, height / 2]);
                // geoPath is library simply turns lat/lon into screen coordinates
            var path_g = d3.geo.path()
                    .projection(projection_google);
            var projection_covid = d3.geo.albersUsa()
                    .scale(650)
                    .translate([3 * width / 4, height / 2]);
                // geoPath is library simply turns lat/lon into screen coordinates
            var path_c = d3.geo.path()
                    .projection(projection_covid);
            var g = svg.append("g");
            console.log(container_style.width);
            console.log(height);
            // initialize d3 components
            var colors = d3.scale.linear()
                .domain([0, 100])
                .range(['#A4D263', '#E8DB3A', '#E89C3A', '#E83D3A']);

            // load data... async 
            d3.csv('data/google-covid.csv', function (data) {
                // us geo json source: https://eric.clst.org/tech/usgeojson/
                d3.json('data/us-states.json', function (json) {
                    console.log(data);
                    console.log(json)
                    g.selectAll("path_g")
                        .data(json.features)
                        .enter()
                        .append("path")
                        .attr("fill", "#ccc")
                        .attr("stroke", "#333")
                        .attr("d", path_g);
                    g.selectAll("path_c")
                        .data(json.features)
                        .enter()
                        .append("path")
                        .attr("fill", "#ccc")
                        .attr("stroke", "#333")
                        .attr("d", path_c);
                })
            });
    
    </script>

    

</body>